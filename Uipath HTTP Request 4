Tuyá»‡t vá»i, mÃ¬nh sáº½ hÆ°á»›ng dáº«n báº¡n **step-by-step chi tiáº¿t** Ä‘á»ƒ xÃ¢y dá»±ng Flow cha theo Ä‘Ãºng yÃªu cáº§u:

---

## ğŸ¯ Má»¥c tiÃªu
- Sá»­ dá»¥ng **Child Flow** Ä‘á»ƒ Ä‘á»c 1 folder â†’ tráº£ vá» máº£ng `Files[]` vÃ  `Subfolders[]`
- **Flow cha** quáº£n lÃ½ hÃ ng Ä‘á»£i (`Queue`) cÃ¡c folder Ä‘ang chá» xá»­ lÃ½.
- Duyá»‡t **tuáº§n tá»± tá»«ng nhÃ¡nh folder** (xá»­ lÃ½ háº¿t cÃ¡c con cá»§a má»™t folder rá»“i má»›i sang folder tiáº¿p theo).

---

## ğŸ“‚ Cáº¥u trÃºc xá»­ lÃ½: Giá»‘ng thuáº­t toÃ¡n **Depth-First Search (DFS)**

- Sá»­ dá»¥ng **biáº¿n máº£ng `PendingFolders`** nhÆ° má»™t **stack** (thÃªm báº±ng `insert at beginning`)
- LuÃ´n xá»­ lÃ½ folder á»Ÿ Ä‘áº§u danh sÃ¡ch â†’ Ä‘áº£m báº£o duyá»‡t theo chiá»u sÃ¢u.

---

## ğŸ— Step-by-step xÃ¢y dá»±ng Flow Cha

### ğŸ”¸ Biáº¿n cáº§n khai bÃ¡o:
| TÃªn biáº¿n | Kiá»ƒu | GiÃ¡ trá»‹ khá»Ÿi táº¡o |
|----------|------|------------------|
| `PendingFolders` | Array | `[â€˜/Shared Documentsâ€™]` hoáº·c folder gá»‘c |
| `AllFiles` | Array | `[]` |

---

### ğŸ”„ BÆ°á»›c láº·p: `Do Until`  
**Condition**: `length(variables('PendingFolders')) is equal to 0`

---

### ğŸ§± CÃ¡c bÆ°á»›c bÃªn trong `Do Until`

#### ğŸ§© 1. **Get folder Ä‘áº§u tiÃªn Ä‘á»ƒ xá»­ lÃ½**
- **Action**: `Compose - CurrentFolder`
  ```plaintext
  first(variables('PendingFolders'))
  ```

---

#### ğŸ§© 2. **Gá»i Child Flow**
- **Input**: `FolderPath = outputs('Compose - CurrentFolder')`
- **Output giáº£ sá»­**:
  - `Files[]`
  - `Subfolders[]`

---

#### ğŸ§© 3. **Append file vÃ o biáº¿n AllFiles**
- **Action**: `Append to array variable - AllFiles`
  ```plaintext
  variables('AllFiles') + outputs('Child_Flow')?['Files']
  ```

---

#### ğŸ§© 4. **Chuáº©n hÃ³a Subfolders**
- **Action**: `Compose - SafeSubfolders`
  ```plaintext
  if(empty(outputs('Child_Flow')?['Subfolders']), createArray(), outputs('Child_Flow')?['Subfolders'])
  ```

---

#### ğŸ§© 5. **Cáº­p nháº­t PendingFolders**
##### a. Remove folder Ä‘áº§u tiÃªn
- **Action**: `Compose - Remaining`
  ```plaintext
  skip(variables('PendingFolders'), 1)
  ```

##### b. GhÃ©p Subfolders vÃ o Ä‘áº§u danh sÃ¡ch (Duyá»‡t sÃ¢u trÆ°á»›c)
- **Action**: `Set variable - PendingFolders`
  ```plaintext
  concat(outputs('Compose - SafeSubfolders'), outputs('Compose - Remaining'))
  ```

---

## âœ… Káº¿t thÃºc vÃ²ng láº·p
Sau khi `PendingFolders` = `[]`, flow Ä‘Ã£ duyá»‡t toÃ n bá»™ cÃ¢y folder vÃ  lÆ°u toÃ n bá»™ file vÃ o biáº¿n `AllFiles`.

---

## ğŸ”„ CÃ¡ch Flow xá»­ lÃ½ theo Depth-First (DFS):

Giáº£ sá»­ cÃ³ cáº¥u trÃºc:
```
FolderA/
  â”œâ”€â”€ A1/
  â”‚    â””â”€â”€ A1a/
  â””â”€â”€ A2/
FolderB/
```

Flow sáº½ duyá»‡t:
```
FolderA â†’ A1 â†’ A1a â†’ A2 â†’ FolderB
```

---

## ğŸ’¡ Gá»£i Ã½ thÃªm:
- Báº¡n cÃ³ thá»ƒ **gá»i tá»« UiPath qua HTTP request**, khi flow cha hoÃ n táº¥t thÃ¬ **tráº£ JSON** chá»©a toÃ n bá»™ `AllFiles` vá» cho UiPath xá»­ lÃ½.

---

## ğŸ—‚ Báº¡n cáº§n Flow máº«u?

MÃ¬nh cÃ³ thá»ƒ táº¡o file `.zip` máº«u gá»“m:
- Flow cha: `Recursive_GetAllFiles_Main`
- Flow con: `ReadFolder_GetFilesAndSubfolders`

Báº¡n muá»‘n mÃ¬nh chuáº©n bá»‹ giÃºp khÃ´ng? Náº¿u cÃ³ thÃ¬ cho biáº¿t tÃªn folder gá»‘c máº·c Ä‘á»‹nh hoáº·c báº¡n muá»‘n truyá»n tá»« UiPath.
