Tuyá»‡t vá»i, dÆ°á»›i Ä‘Ã¢y lÃ  **Ä‘oáº¡n hÆ°á»›ng dáº«n Ä‘áº§y Ä‘á»§ Step-by-Step trong UiPath** Ä‘á»ƒ gá»i **Power Automate qua HTTP POST**, truyá»n JSON, vÃ  nháº­n láº¡i **dá»¯ liá»‡u JSON (nhÆ° danh sÃ¡ch file)** tá»« Flow.

---

## âœ… Má»¥c tiÃªu:
- Tá»« UiPath, gá»i Power Automate Flow báº±ng HTTP POST.
- Truyá»n input `"FolderPath"` (hoáº·c nhiá»u tham sá»‘ náº¿u cáº§n).
- Nháº­n `JSON` káº¿t quáº£ tá»« Flow (danh sÃ¡ch file, v.v.).
- Dá»… má»Ÿ rá»™ng.

---

## ğŸ”§ Step-by-Step trong UiPath:

### ğŸŸ¦ **1. KÃ©o "HTTP Request" Activity vÃ o Workflow**
> GÃ³i máº·c Ä‘á»‹nh: **UiPath.WebAPI.Activities**

---

### ğŸŸ¦ **2. Cáº¥u hÃ¬nh Activity**

| **Field**            | **Value**                                                                 |
|----------------------|---------------------------------------------------------------------------|
| **EndPoint**         | DÃ¡n URL cá»§a Power Automate Flow *(from trigger)*                          |
| **Method**           | `POST`                                                                    |
| **Headers**          | `{ "Content-Type": "application/json" }` *(add via Dictionary)*           |
| **BodyFormat**       | `Application/Json`                                                        |
| **Body**             | `"{""FolderPath"": ""/Shared Documents/YourFolder""}"` *(chuá»—i JSON)*     |
| **AcceptFormat**     | `Application/Json` *(hoáº·c Ä‘á»ƒ máº·c Ä‘á»‹nh)*                                   |
| **Response**         | Output lÆ°u vÃ o `responseString` (kiá»ƒu `String`)                           |

---

### âœ¨ Gá»£i Ã½ cáº¥u hÃ¬nh Headers (dáº¡ng Dictionary):

```vb
New Dictionary(Of String, String) From {
  {"Content-Type", "application/json"}
}
```

---

### ğŸŸ© **3. (TÃ¹y chá»n) Parse response JSON tráº£ vá» tá»« Flow**

DÃ¹ng `Deserialize JSON` activity Ä‘á»ƒ phÃ¢n tÃ­ch káº¿t quáº£ JSON tá»« biáº¿n `responseString`:

```vb
JObject.Parse(responseString)
```

Hoáº·c Ä‘á»ƒ láº¥y danh sÃ¡ch file:

```vb
JObject.Parse(responseString)("files")
```

---

## ğŸ“¥ VÃ­ dá»¥ JSON Body (POST request)

```json
{
  "FolderPath": "/Shared Documents/Reports/2024"
}
```

---

## ğŸŸ¦ Power Automate (Flow) â€“ Trigger vÃ  Response

### âœ… Trigger: `When an HTTP request is received`

#### Schema:

```json
{
  "type": "object",
  "properties": {
    "FolderPath": {
      "type": "string"
    }
  }
}
```

---

### âœ… Cuá»‘i Flow: Action "Response"

| Field          | Value                         |
|----------------|-------------------------------|
| Status Code    | `200`                         |
| Headers        | `Content-Type: application/json` |
| Body           | `{"files": @{variables('AllFiles')}}` |

---

## ğŸ§ª Debug Tip

Náº¿u váº«n lá»—i, báº¡n cÃ³ thá»ƒ:
- Gá»­i test tá»« **Postman** trÆ°á»›c â†’ xÃ¡c minh Flow nháº­n Ä‘Æ°á»£c.
- ThÃªm Compose Ä‘á»ƒ xem giÃ¡ trá»‹ `triggerBody()?['FolderPath']`
- ThÃªm log file á»Ÿ UiPath: `Log Message â†’ responseString`

---

## ğŸ§° Báº¡n cáº§n gÃ¬ thÃªm?

âœ… Máº«u `.xaml` gá»­i HTTP?  
âœ… Táº¡o Flow máº«u `.zip` chá»©a Flow HTTP + xá»­ lÃ½ file tá»« SharePoint?

Chá»‰ cáº§n nÃ³i nhÃ©, mÃ¬nh sáº½ gá»­i báº¡n luÃ´n!
