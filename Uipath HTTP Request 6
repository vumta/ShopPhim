Hiá»ƒu rá»“i! Khi báº¡n dÃ¹ng **Power Automate** vá»›i trigger **â€œWhen an HTTP request is receivedâ€**, máº·c Ä‘á»‹nh Flow **cháº¥p nháº­n cáº£ GET vÃ  POST**, nhÆ°ng **ná»™i dung body chá»‰ Ä‘Æ°á»£c xá»­ lÃ½ vá»›i POST**. Náº¿u báº¡n bá»‹ lá»—i khi POST, dÆ°á»›i Ä‘Ã¢y lÃ  hÆ°á»›ng xá»­ lÃ½ **chi tiáº¿t vÃ  Ä‘áº§y Ä‘á»§ Ä‘á»ƒ kháº¯c phá»¥c lá»—i POST**, vÃ  Ä‘áº£m báº£o UiPath cÃ³ thá»ƒ gá»i Ä‘Ãºng cÃ¡ch.

---

## âœ… PhÃ¢n tÃ­ch lá»—i POST thÆ°á»ng gáº·p

1. **KhÃ´ng truyá»n body hoáº·c sai cáº¥u trÃºc JSON**
2. **Header thiáº¿u `Content-Type: application/json`**
3. **Power Automate khÃ´ng cÃ³ schema hoáº·c xá»­ lÃ½ sai**
4. **UiPath gá»­i POST nhÆ°ng Flow Ä‘ang dÃ¹ng GET Ä‘á»ƒ debug â†’ lá»—i khÃ´ng rÃµ rÃ ng**

---

## âœ… Giáº£i phÃ¡p chuáº©n: Gá»­i POST tá»« UiPath vÃ  nháº­n JSON vá» Ä‘Ãºng cÃ¡ch

---

### ğŸ”· BÆ°á»›c 1: Power Automate â€“ Trigger "When an HTTP request is received"

#### ğŸŸ¡ Cáº¥u hÃ¬nh Schema Input:

VÃ­ dá»¥: Náº¿u báº¡n Ä‘á»‹nh gá»­i `FolderPath`

```json
{
  "type": "object",
  "properties": {
    "FolderPath": { "type": "string" }
  }
}
```

ğŸ“Œ **LÆ°u Ã½**: Náº¿u khÃ´ng cÃ³ schema hoáº·c truyá»n sai Ä‘á»‹nh dáº¡ng, Flow cÃ³ thá»ƒ lá»—i khi POST.

---

### ğŸ”· BÆ°á»›c 2: Power Automate xá»­ lÃ½ Ä‘áº§u vÃ o â†’ Gá»i Child Flow â†’ Tráº£ JSON

#### âœ¨ Action cuá»‘i: "Response"

- **Status Code**: `200`
- **Headers**: `Content-Type: application/json`
- **Body** (vÃ­ dá»¥):

```json
{
  "files": @{variables('AllFiles')}
}
```

---

### ğŸ”· BÆ°á»›c 3: Gá»­i HTTP Request tá»« UiPath (POST)

#### ğŸ›  Cáº¥u hÃ¬nh trong UiPath HTTP Request:

| Field               | Value                                                |
|---------------------|------------------------------------------------------|
| **Method**          | `POST`                                               |
| **EndPoint**        | URL cá»§a Trigger (sao chÃ©p tá»« Flow)                   |
| **Body**            | Dáº¡ng JSON, vÃ­ dá»¥:                                    |
|                     | `{ "FolderPath": "/Shared Documents/MyFolder" }`     |
| **Headers**         | `{ "Content-Type": "application/json" }`            |
| **AcceptFormat**    | `application/json`                                   |
| **Response Output** | GÃ¡n vÃ o `responseString` (String hoáº·c JObject.Parse)|

---

## âœ… Check náº¿u váº«n lá»—i POST:

1. ğŸ” **Kiá»ƒm tra Flow URL** (Ä‘Ã£ sao chÃ©p sau khi lÆ°u Flow?)
2. ğŸ“Œ **Test vá»›i Postman trÆ°á»›c** Ä‘á»ƒ xÃ¡c Ä‘á»‹nh lá»—i tá»« UiPath hay Flow
3. ğŸ§ª **Táº¡m Ä‘á»•i trigger sang â€œManually triggerâ€ Ä‘á»ƒ debug bÃªn trong**

---

## ğŸ”§ VÃ­ dá»¥ ná»™i dung Body (POST):

```json
{
  "FolderPath": "/Shared Documents/Reports"
}
```

â†’ JSON pháº£i **match hoÃ n toÃ n** vá»›i schema trong Flow.

---

## âœ… Káº¿t luáº­n

| Gá»­i báº±ng         | GET  | POST |
|------------------|------|------|
| Gá»­i tham sá»‘ URL   | âœ…   | âŒ (body preferred) |
| Gá»­i body JSON     | âŒ   | âœ…   |
| Nháº­n response JSON| âœ…   | âœ…   |

---

Náº¿u báº¡n váº«n bá»‹ lá»—i khi POST tá»« UiPath, gá»­i mÃ¬nh thÃ´ng bÃ¡o lá»—i cá»¥ thá»ƒ hoáº·c báº¡n muá»‘n mÃ¬nh táº¡o sáºµn **Flow máº«u** + Ä‘oáº¡n UiPath gá»­i HTTP POST hoÃ n chá»‰nh nhÃ©.
